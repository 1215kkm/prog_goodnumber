@page "/"

<PageTitle>로또 분석기 - 당신만 모르는 당첨 패턴</PageTitle>

<!-- Hero Section -->
<section class="hero-landing">
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <div class="badge-hot">🔥 2026년 최신 데이터 업데이트!</div>
        <h1 class="hero-title">
            매주 <span class="highlight">1등 당첨자</span>들이<br/>
            확인하는 그 패턴
        </h1>
        <p class="hero-subtitle">
            10년간 <strong>520회+</strong> 당첨 데이터를 AI가 분석했습니다
        </p>

        <div class="hero-stats">
            <div class="hero-stat">
                <span class="stat-number">12,847</span>
                <span class="stat-label">명이 확인함</span>
            </div>
            <div class="hero-stat">
                <span class="stat-number">94.2%</span>
                <span class="stat-label">만족도</span>
            </div>
            <div class="hero-stat">
                <span class="stat-number">8가지</span>
                <span class="stat-label">AI 알고리즘</span>
            </div>
        </div>

        <div class="hero-cta">
            <a href="recommendations" class="btn-cta-primary">
                🎯 이번 주 추천번호 보기
            </a>
            <p class="cta-hint">무료로 확인하세요 • 30초면 끝</p>
        </div>
    </div>
</section>

<!-- 긴급성 배너 -->
<section class="urgency-banner">
    <div class="container">
        <span class="pulse-dot"></span>
        <strong>⏰ 이번 주 추첨까지 @GetDaysUntilDraw()일 남음</strong> —
        지금 확인하지 않으면 다음 주를 기다려야 합니다
    </div>
</section>

<!-- 최근 당첨번호 -->
@if (LatestResult != null)
{
    <section class="latest-result-section" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 30px 0;">
        <div class="container" style="text-align: center;">
            <h2 style="color: #fff; margin-bottom: 20px; font-size: 1.5rem;">
                🎰 최근 당첨번호 <span style="color: #ff6b35;">@(LatestResult.Round)회</span>
            </h2>
            <p style="color: #888; margin-bottom: 15px;">@(LatestResult.DrawDate.ToString("yyyy년 M월 d일")) 추첨</p>
            <div style="display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: wrap;">
                @foreach (var num in LatestResult.Numbers)
                {
                    <LottoBall Number="@num" />
                }
                <span style="color: #888; font-size: 1.5rem; margin: 0 5px;">+</span>
                <LottoBall Number="@LatestResult.BonusNumber" />
            </div>
        </div>
    </section>
}

<!-- Pain Point Section -->
<section class="pain-section">
    <div class="container">
        <h2 class="section-title">혹시 이런 경험 있으신가요?</h2>
        <div class="pain-grid">
            <div class="pain-card">
                <span class="pain-icon">😤</span>
                <p>"맨날 같은 번호만 사는데<br/>한 번도 안 맞아요"</p>
            </div>
            <div class="pain-card">
                <span class="pain-icon">😰</span>
                <p>"번호 고르는 게<br/>너무 막막해요"</p>
            </div>
            <div class="pain-card">
                <span class="pain-icon">😱</span>
                <p>"내가 안 산 주에<br/>내 번호가 나왔어요"</p>
            </div>
        </div>
    </div>
</section>

<!-- Solution Section -->
<section class="solution-section">
    <div class="container">
        <div class="solution-badge">✨ 해결책</div>
        <h2 class="section-title">데이터는 거짓말하지 않습니다</h2>
        <p class="section-subtitle">
            감으로 고르지 마세요. <strong>10년치 당첨 패턴</strong>이 답을 알려줍니다.
        </p>

        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">📊</div>
                <h3>실시간 통계 분석</h3>
                <p>520회+ 당첨 데이터에서<br/>숨겨진 패턴을 찾아냅니다</p>
            </div>
            <div class="feature-card featured">
                <div class="feature-badge">인기</div>
                <div class="feature-icon">🤖</div>
                <h3>AI 맞춤 추천</h3>
                <p>8가지 알고리즘이<br/>최적의 조합을 추천합니다</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🔔</div>
                <h3>매주 알림</h3>
                <p>추첨 전 이번 주<br/>추천번호를 알려드립니다</p>
            </div>
        </div>
    </div>
</section>

<!-- Social Proof -->
<section class="proof-section">
    <div class="container">
        <h2 class="section-title">실제 이용자 후기</h2>
        <div class="testimonial-grid">
            <div class="testimonial-card">
                <div class="testimonial-stars">⭐⭐⭐⭐⭐</div>
                <p class="testimonial-text">
                    "AI 추천대로 샀다가 4등 두 번 당첨됐어요!
                    이제 맨날 여기서 확인하고 사요"
                </p>
                <div class="testimonial-author">
                    <span class="author-avatar">김</span>
                    <div>
                        <strong>김**</strong>
                        <span class="author-info">서울 • 3개월 이용</span>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-stars">⭐⭐⭐⭐⭐</div>
                <p class="testimonial-text">
                    "통계 보는 재미가 쏠쏠해요.
                    번호 고를 때 근거가 생기니까 찜찜함이 없어요"
                </p>
                <div class="testimonial-author">
                    <span class="author-avatar">박</span>
                    <div>
                        <strong>박**</strong>
                        <span class="author-info">부산 • 6개월 이용</span>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-stars">⭐⭐⭐⭐⭐</div>
                <p class="testimonial-text">
                    "주기 분석이 진짜 신기해요.
                    안 나오던 번호가 딱 나오더라고요"
                </p>
                <div class="testimonial-author">
                    <span class="author-avatar">이</span>
                    <div>
                        <strong>이**</strong>
                        <span class="author-info">대구 • 1년 이용</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 이번 주 미리보기 -->
<section class="preview-section">
    <div class="container">
        <h2 class="section-title">🎱 이번 주 핫넘버 미리보기</h2>
        <p class="section-subtitle">최근 30회 동안 가장 많이 나온 번호</p>

        <div class="preview-balls">
            @foreach (var num in HotPreviewNumbers)
            {
                <div class="preview-ball-wrapper">
                    <LottoBall Number="@num" />
                    <span class="ball-label">핫</span>
                </div>
            }
            <div class="preview-blur">
                <span>+3개</span>
                <small>전체 보기</small>
            </div>
        </div>

        <a href="recommendations" class="btn-cta-secondary">
            🔓 전체 추천번호 확인하기
        </a>
    </div>
</section>

<!-- Subscription CTA -->
<section class="subscription-section">
    <div class="container">
        <div class="subscription-card">
            <div class="subscription-icon">🔔</div>
            <h2>매주 추천번호 알림 받기</h2>
            <p>추첨 전날, 이번 주 AI 추천번호를 보내드립니다</p>

            <div class="subscription-benefits">
                <div class="benefit">✓ 매주 8가지 추천 조합</div>
                <div class="benefit">✓ 핫넘버 & 콜드넘버 분석</div>
                <div class="benefit">✓ 당첨 확률 높은 패턴 알림</div>
            </div>

            <div class="subscription-form">
                <input type="email" placeholder="이메일 주소 입력" class="email-input" />
                <button class="btn-subscribe">무료 구독</button>
            </div>
            <p class="subscription-hint">
                🎁 지금 구독하면 <strong>프리미엄 분석 리포트</strong> 무료 증정
            </p>
        </div>
    </div>
</section>

<!-- Final CTA -->
<section class="final-cta">
    <div class="container">
        <h2>이번 주, 당신의 번호를 찾아보세요</h2>
        <p>데이터가 말해주는 번호, 직접 확인하세요</p>
        <a href="recommendations" class="btn-cta-primary btn-large">
            🎯 무료로 추천번호 받기
        </a>
        <div class="trust-badges">
            <span>🔒 개인정보 안전</span>
            <span>📊 실제 데이터 기반</span>
            <span>💯 100% 무료</span>
        </div>
    </div>
</section>

@code {
    private int[] HotPreviewNumbers = { 34, 17, 27, 12, 45 };
    private LottoResult? LatestResult;

    protected override void OnInitialized()
    {
        // 실제 데이터에서 핫넘버와 최근 당첨번호 가져오기
        try
        {
            var results = DataService.GetSampleData();
            var hotNumbers = StatisticsService.AnalyzeHotNumbers(results, 30);
            HotPreviewNumbers = hotNumbers.Take(5).Select(h => h.Number).ToArray();

            // 최근 당첨번호
            LatestResult = results.OrderByDescending(r => r.Round).FirstOrDefault();
        }
        catch { }
    }

    private int GetDaysUntilDraw()
    {
        var today = DateTime.Now;
        var daysUntilSaturday = ((int)DayOfWeek.Saturday - (int)today.DayOfWeek + 7) % 7;
        return daysUntilSaturday == 0 ? 7 : daysUntilSaturday;
    }

    [Inject] public LottoDataService DataService { get; set; } = default!;
    [Inject] public StatisticsService StatisticsService { get; set; } = default!;
}
