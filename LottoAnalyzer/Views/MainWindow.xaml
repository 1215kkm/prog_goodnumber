<Window x:Class="LottoAnalyzer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:LottoAnalyzer.ViewModels"
        xmlns:local="clr-namespace:LottoAnalyzer.Views"
        mc:Ignorable="d"
        Title="ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ê¸° - Lotto Analyzer"
        Height="900" Width="1400"
        MinHeight="700" MinWidth="1200"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <!-- ë¡œë˜ ë³¼ ìŠ¤íƒ€ì¼ -->
        <Style x:Key="LottoBallStyle" TargetType="Border">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Margin" Value="3"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                    <Setter Property="Background" Value="#FBC400"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                    <Setter Property="Background" Value="#69C8F2"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                    <Setter Property="Background" Value="#FF7272"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                    <Setter Property="Background" Value="#AAAAAA"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                    <Setter Property="Background" Value="#B0D840"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- ë¡œë˜ ë³¼ ë²ˆí˜¸ í…œí”Œë¦¿ -->
        <DataTemplate x:Key="LottoBallTemplate">
            <Border Width="36" Height="36" CornerRadius="18" Margin="2">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                                <Setter Property="Background" Value="#FBC400"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                                <Setter Property="Background" Value="#69C8F2"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                                <Setter Property="Background" Value="#FF7272"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                                <Setter Property="Background" Value="#AAAAAA"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                                <Setter Property="Background" Value="#B0D840"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="{Binding Number}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="White">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="2" ShadowDepth="1" Opacity="0.3"/>
                    </TextBlock.Effect>
                </TextBlock>
            </Border>
        </DataTemplate>

        <!-- íƒ­ ìŠ¤íƒ€ì¼ -->
        <Style TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border" Padding="15,8" Margin="2,0" CornerRadius="5,5,0,0"
                                Background="#E0E0E0" Cursor="Hand">
                            <ContentPresenter x:Name="ContentSite" ContentSource="Header"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#BBDEFB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- í—¤ë” -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸŽ±" FontSize="28" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <StackPanel>
                        <TextBlock Text="ë¡œë˜ ë²ˆí˜¸ ë¶„ì„ê¸°" FontSize="24" FontWeight="Bold" Foreground="White"/>
                        <TextBlock Text="í†µê³„ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë²ˆí˜¸ ì¶”ì²œ" FontSize="12" Foreground="#B3E5FC"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Margin="0,0,20,0">
                        <TextBlock Text="ë¶„ì„ ê¸°ê°„:" Foreground="White" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <ComboBox Width="80" SelectedIndex="2" VerticalAlignment="Center"
                                  SelectedValue="{Binding SelectedYears}">
                            <ComboBoxItem Content="1ë…„" Tag="1"/>
                            <ComboBoxItem Content="3ë…„" Tag="3"/>
                            <ComboBoxItem Content="5ë…„" Tag="5"/>
                            <ComboBoxItem Content="10ë…„" Tag="10"/>
                        </ComboBox>
                    </StackPanel>

                    <Button Content="ðŸ“¥ API ë°ì´í„° ë¡œë“œ"
                            Command="{Binding LoadDataFromApiCommand}"
                            Style="{StaticResource PrimaryButton}"
                            Background="#4CAF50"
                            Margin="0,0,10,0"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"/>

                    <Button Content="ðŸ“‚ ìƒ˜í”Œ ë°ì´í„°"
                            Command="{Binding LoadSampleDataCommand}"
                            Style="{StaticResource PrimaryButton}"
                            Background="#FF9800"
                            IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <TabControl Grid.Row="1" Margin="15">
            <!-- íƒ­ 1: ì¶”ì²œ ë²ˆí˜¸ -->
            <TabItem Header="ðŸŽ¯ ì¶”ì²œ ë²ˆí˜¸">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Content="ðŸ”„ ì¶”ì²œ ë²ˆí˜¸ ìƒˆë¡œê³ ì¹¨"
                                    Command="{Binding RefreshRecommendationsCommand}"
                                    Style="{StaticResource PrimaryButton}"/>
                            <TextBlock Text="{Binding StatusMessage}"
                                       VerticalAlignment="Center"
                                       Margin="20,0,0,0"
                                       FontSize="14"
                                       Foreground="#666"/>
                        </StackPanel>

                        <ItemsControl Grid.Row="1" ItemsSource="{Binding Recommendations}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource CardStyle}" Width="380" Margin="10">
                                        <StackPanel>
                                            <TextBlock Text="{Binding RecommendationType}"
                                                       Style="{StaticResource TitleStyle}"/>
                                            <TextBlock Text="{Binding Description}"
                                                       TextWrapping="Wrap"
                                                       Foreground="#666"
                                                       Margin="0,0,0,15"/>

                                            <!-- ì¶”ì²œ ë²ˆí˜¸ í‘œì‹œ -->
                                            <ItemsControl ItemsSource="{Binding Numbers}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Width="45" Height="45" CornerRadius="23" Margin="5">
                                                            <Border.Background>
                                                                <SolidColorBrush>
                                                                    <SolidColorBrush.Color>
                                                                        <MultiBinding Converter="{StaticResource NumberToColorConverter}">
                                                                            <Binding/>
                                                                        </MultiBinding>
                                                                    </SolidColorBrush.Color>
                                                                </SolidColorBrush>
                                                            </Border.Background>
                                                            <TextBlock Text="{Binding}"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       FontWeight="Bold"
                                                                       FontSize="16"
                                                                       Foreground="White">
                                                                <TextBlock.Effect>
                                                                    <DropShadowEffect Color="Black" BlurRadius="2" ShadowDepth="1" Opacity="0.3"/>
                                                                </TextBlock.Effect>
                                                            </TextBlock>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>

                                            <!-- ì‹ ë¢°ë„ í‘œì‹œ -->
                                            <Grid Margin="0,15,0,0">
                                                <ProgressBar Value="{Binding Confidence}"
                                                             Maximum="100"
                                                             Height="8"
                                                             Background="#E0E0E0">
                                                    <ProgressBar.Foreground>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                            <GradientStop Color="#4CAF50" Offset="0"/>
                                                            <GradientStop Color="#8BC34A" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </ProgressBar.Foreground>
                                                </ProgressBar>
                                            </Grid>
                                            <TextBlock HorizontalAlignment="Right" Margin="0,5,0,0">
                                                <Run Text="ì‹ ë¢°ë„: "/>
                                                <Run Text="{Binding Confidence}" FontWeight="Bold"/>
                                                <Run Text="%"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- íƒ­ 2: ë²ˆí˜¸ë³„ í†µê³„ -->
            <TabItem Header="ðŸ“Š ë²ˆí˜¸ë³„ í†µê³„">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="350"/>
                    </Grid.ColumnDefinitions>

                    <!-- ë²ˆí˜¸ ë¹ˆë„ ê·¸ë¦¬ë“œ -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,10,0">
                        <StackPanel>
                            <TextBlock Text="ë²ˆí˜¸ë³„ ì¶œí˜„ ë¹ˆë„ (ë§Žì´ ë‚˜ì˜¨ ìˆœì„œ)" Style="{StaticResource TitleStyle}"/>
                            <DataGrid ItemsSource="{Binding OverallStatistics}"
                                      AutoGenerateColumns="False"
                                      IsReadOnly="True"
                                      HeadersVisibility="Column"
                                      GridLinesVisibility="Horizontal"
                                      BorderThickness="0"
                                      MaxHeight="500">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ìˆœìœ„" Width="50"
                                                        Binding="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow},
                                                        Converter={StaticResource RowIndexConverter}}"/>
                                    <DataGridTemplateColumn Header="ë²ˆí˜¸" Width="70">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Border Width="32" Height="32" CornerRadius="16">
                                                    <Border.Style>
                                                        <Style TargetType="Border">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                                                                    <Setter Property="Background" Value="#FBC400"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                                                                    <Setter Property="Background" Value="#69C8F2"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                                                                    <Setter Property="Background" Value="#FF7272"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                                                                    <Setter Property="Background" Value="#AAAAAA"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                                                                    <Setter Property="Background" Value="#B0D840"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Border.Style>
                                                    <TextBlock Text="{Binding Number}"
                                                               HorizontalAlignment="Center"
                                                               VerticalAlignment="Center"
                                                               Foreground="White"
                                                               FontWeight="Bold"/>
                                                </Border>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTextColumn Header="ì¶œí˜„ íšŸìˆ˜" Width="90" Binding="{Binding Count}"/>
                                    <DataGridTextColumn Header="ë¹„ìœ¨(%)" Width="80" Binding="{Binding Percentage, StringFormat=N2}"/>
                                    <DataGridTextColumn Header="ë³´ë„ˆìŠ¤ ì¶œí˜„" Width="90" Binding="{Binding BonusCount}"/>
                                    <DataGridTextColumn Header="ìµœê·¼ ì¶œí˜„" Width="90" Binding="{Binding LastAppearanceRound}"/>
                                    <DataGridTextColumn Header="ë¯¸ì¶œí˜„ íšŒì°¨" Width="90" Binding="{Binding GapSinceLastAppearance}"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>

                    <!-- ìš°ì¸¡ íŒ¨ë„ - íŒ¨í„´ ë¶„ì„ -->
                    <StackPanel Grid.Column="1">
                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="í™€ì§ ë¹„ìœ¨ ë¶„ì„" Style="{StaticResource TitleStyle}"/>
                                <TextBlock Text="{Binding OddEvenRatioText}"
                                           FontFamily="Consolas"
                                           LineHeight="22"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="ê³ ì € ë¹„ìœ¨ ë¶„ì„" Style="{StaticResource TitleStyle}"/>
                                <TextBlock Text="{Binding HighLowRatioText}"
                                           FontFamily="Consolas"
                                           LineHeight="22"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="í•©ê³„ ë²”ìœ„ ë¶„ì„" Style="{StaticResource TitleStyle}"/>
                                <TextBlock Text="{Binding SumRangeText}"
                                           FontFamily="Consolas"
                                           LineHeight="22"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="ì—°ì† ë²ˆí˜¸ íŒ¨í„´" Style="{StaticResource TitleStyle}"/>
                                <TextBlock Text="{Binding ConsecutivePatternText}"
                                           FontFamily="Consolas"
                                           LineHeight="22"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- íƒ­ 3: ì›”ë³„ í†µê³„ -->
            <TabItem Header="ðŸ“… ì›”ë³„ í†µê³„">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding MonthlyStatistics}" Margin="10">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource CardStyle}" Width="280" Margin="10">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                            <TextBlock Text="{Binding MonthName}"
                                                       FontSize="20" FontWeight="Bold"
                                                       Foreground="{StaticResource PrimaryBrush}"/>
                                            <TextBlock Text="{Binding TotalDraws, StringFormat=' ({0}íšŒ ì¶”ì²¨)'}"
                                                       VerticalAlignment="Bottom"
                                                       Foreground="#888"
                                                       Margin="5,0,0,2"/>
                                        </StackPanel>

                                        <TextBlock Text="TOP 10 ë²ˆí˜¸" Style="{StaticResource SubtitleStyle}"/>

                                        <ItemsControl ItemsSource="{Binding TopNumbers}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Margin="0,3">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="40"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="50"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Border Width="30" Height="30" CornerRadius="15">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                                                                            <Setter Property="Background" Value="#FBC400"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                                                                            <Setter Property="Background" Value="#69C8F2"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                                                                            <Setter Property="Background" Value="#FF7272"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                                                                            <Setter Property="Background" Value="#AAAAAA"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                                                                            <Setter Property="Background" Value="#B0D840"/>
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <TextBlock Text="{Binding Number}"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       Foreground="White"
                                                                       FontWeight="Bold"
                                                                       FontSize="12"/>
                                                        </Border>

                                                        <ProgressBar Grid.Column="1"
                                                                     Value="{Binding Percentage}"
                                                                     Maximum="20"
                                                                     Height="12"
                                                                     Margin="10,0"
                                                                     Foreground="{StaticResource SecondaryBrush}"/>

                                                        <TextBlock Grid.Column="2"
                                                                   Text="{Binding Count, StringFormat={}{0}íšŒ}"
                                                                   FontSize="11"
                                                                   VerticalAlignment="Center"/>
                                                    </Grid>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

            <!-- íƒ­ 4: ê³„ì ˆë³„ í†µê³„ -->
            <TabItem Header="ðŸŒ¸ ê³„ì ˆë³„ í†µê³„">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding SeasonalStatistics}" Margin="10">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="2"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource CardStyle}" Margin="10">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                            <TextBlock FontSize="28" Margin="0,0,10,0">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Season}" Value="Spring">
                                                                <Setter Property="Text" Value="ðŸŒ¸"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Season}" Value="Summer">
                                                                <Setter Property="Text" Value="â˜€ï¸"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Season}" Value="Fall">
                                                                <Setter Property="Text" Value="ðŸ‚"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Season}" Value="Winter">
                                                                <Setter Property="Text" Value="â„ï¸"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                            <StackPanel>
                                                <TextBlock Text="{Binding SeasonName}"
                                                           FontSize="22" FontWeight="Bold"/>
                                                <TextBlock Text="{Binding TotalDraws, StringFormat='ì´ {0}íšŒ ì¶”ì²¨'}"
                                                           Foreground="#888"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <TextBlock Text="ì´ ê³„ì ˆì— ìžì£¼ ë‚˜ì˜¤ëŠ” ë²ˆí˜¸ TOP 10"
                                                   Style="{StaticResource SubtitleStyle}"/>

                                        <!-- ë³¼ í˜•íƒœë¡œ í‘œì‹œ -->
                                        <ItemsControl ItemsSource="{Binding TopNumbers}">
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <WrapPanel/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Vertical" Margin="5">
                                                        <Border Width="40" Height="40" CornerRadius="20">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                                                                            <Setter Property="Background" Value="#FBC400"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                                                                            <Setter Property="Background" Value="#69C8F2"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                                                                            <Setter Property="Background" Value="#FF7272"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                                                                            <Setter Property="Background" Value="#AAAAAA"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                                                                            <Setter Property="Background" Value="#B0D840"/>
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <TextBlock Text="{Binding Number}"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       Foreground="White"
                                                                       FontWeight="Bold"
                                                                       FontSize="14"/>
                                                        </Border>
                                                        <TextBlock Text="{Binding Count, StringFormat={}{0}íšŒ}"
                                                                   HorizontalAlignment="Center"
                                                                   FontSize="10"
                                                                   Foreground="#888"
                                                                   Margin="0,3,0,0"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

            <!-- íƒ­ 5: ì—°ë„ë³„ í†µê³„ -->
            <TabItem Header="ðŸ“ˆ ì—°ë„ë³„ í†µê³„">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding YearlyStatistics}" Margin="10">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Style="{StaticResource CardStyle}" Margin="10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Year, StringFormat={}{0}ë…„}"
                                                       FontSize="24" FontWeight="Bold"
                                                       Foreground="{StaticResource PrimaryBrush}"/>
                                            <TextBlock Text="{Binding TotalDraws, StringFormat='({0}íšŒ ì¶”ì²¨)'}"
                                                       Foreground="#888"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="í•´ë‹¹ ì—°ë„ TOP 10 ë²ˆí˜¸" Margin="0,0,0,10" FontWeight="SemiBold"/>
                                            <ItemsControl ItemsSource="{Binding TopNumbers}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Margin="5,0">
                                                            <Border Width="36" Height="36" CornerRadius="18">
                                                                <Border.Style>
                                                                    <Style TargetType="Border">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding ColorGroup}" Value="Yellow">
                                                                                <Setter Property="Background" Value="#FBC400"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding ColorGroup}" Value="Blue">
                                                                                <Setter Property="Background" Value="#69C8F2"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding ColorGroup}" Value="Red">
                                                                                <Setter Property="Background" Value="#FF7272"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding ColorGroup}" Value="Gray">
                                                                                <Setter Property="Background" Value="#AAAAAA"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding ColorGroup}" Value="Green">
                                                                                <Setter Property="Background" Value="#B0D840"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Border.Style>
                                                                <TextBlock Text="{Binding Number}"
                                                                           HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"
                                                                           Foreground="White"
                                                                           FontWeight="Bold"/>
                                                            </Border>
                                                            <TextBlock Text="{Binding Count}"
                                                                       HorizontalAlignment="Center"
                                                                       FontSize="10"
                                                                       Foreground="#888"/>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </TabItem>

            <!-- íƒ­ 6: ìµœê·¼ ë‹¹ì²¨ ë²ˆí˜¸ -->
            <TabItem Header="ðŸŽ° ìµœê·¼ ë‹¹ì²¨">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="ìµœê·¼ 10íšŒ ë‹¹ì²¨ ë²ˆí˜¸" Style="{StaticResource TitleStyle}"/>

                                <ItemsControl ItemsSource="{Binding RecentResults}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="10">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="100"/>
                                                        <ColumnDefinition Width="120"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Round, StringFormat='ì œ {0}íšŒ'}"
                                                                   FontWeight="Bold" FontSize="14"/>
                                                        <TextBlock Text="{Binding DrawDate, StringFormat=yyyy-MM-dd}"
                                                                   Foreground="#888" FontSize="12"/>
                                                    </StackPanel>

                                                    <TextBlock Grid.Column="1"
                                                               Text="{Binding Season, Converter={StaticResource SeasonToKoreanConverter}}"
                                                               VerticalAlignment="Center"
                                                               Foreground="#666"/>

                                                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                        <!-- ë‹¹ì²¨ ë²ˆí˜¸ 6ê°œ -->
                                                        <ItemsControl ItemsSource="{Binding Numbers}">
                                                            <ItemsControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel Orientation="Horizontal"/>
                                                                </ItemsPanelTemplate>
                                                            </ItemsControl.ItemsPanel>
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Width="36" Height="36" CornerRadius="18" Margin="3,0">
                                                                        <Border.Background>
                                                                            <SolidColorBrush>
                                                                                <SolidColorBrush.Color>
                                                                                    <MultiBinding Converter="{StaticResource NumberToColorConverter}">
                                                                                        <Binding/>
                                                                                    </MultiBinding>
                                                                                </SolidColorBrush.Color>
                                                                            </SolidColorBrush>
                                                                        </Border.Background>
                                                                        <TextBlock Text="{Binding}"
                                                                                   HorizontalAlignment="Center"
                                                                                   VerticalAlignment="Center"
                                                                                   Foreground="White"
                                                                                   FontWeight="Bold"/>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>

                                                        <TextBlock Text="+" VerticalAlignment="Center" Margin="10,0" FontSize="16"/>

                                                        <!-- ë³´ë„ˆìŠ¤ ë²ˆí˜¸ -->
                                                        <Border Width="36" Height="36" CornerRadius="18"
                                                                BorderBrush="#333" BorderThickness="2">
                                                            <Border.Background>
                                                                <SolidColorBrush>
                                                                    <SolidColorBrush.Color>
                                                                        <MultiBinding Converter="{StaticResource NumberToColorConverter}">
                                                                            <Binding Path="BonusNumber"/>
                                                                        </MultiBinding>
                                                                    </SolidColorBrush.Color>
                                                                </SolidColorBrush>
                                                            </Border.Background>
                                                            <TextBlock Text="{Binding BonusNumber}"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       Foreground="White"
                                                                       FontWeight="Bold"/>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- í‘¸í„° / ìƒíƒœë°” -->
        <Border Grid.Row="2" Background="#E3F2FD" Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ë¶„ì„ëœ ë°ì´í„°: " Foreground="#666"/>
                    <TextBlock Text="{Binding TotalDrawCount, StringFormat={}{0}íšŒ}" FontWeight="Bold"/>
                    <TextBlock Text=" | " Foreground="#CCC" Margin="10,0"/>
                    <TextBlock Text="{Binding StatusMessage}" Foreground="#666"/>
                </StackPanel>

                <!-- ë¡œë”© í‘œì‹œ -->
                <StackPanel Grid.Column="1" Orientation="Horizontal"
                            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                    <ProgressBar Width="150" Height="15" Value="{Binding LoadingProgress}" Maximum="100"/>
                    <TextBlock Text="{Binding LoadingProgress, StringFormat={}{0}%}" Margin="10,0,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
        <Border Grid.RowSpan="3" Background="#80000000"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="ë°ì´í„° ë¡œë”© ì¤‘..." FontSize="20" Foreground="White" HorizontalAlignment="Center"/>
                <ProgressBar Width="300" Height="20" Value="{Binding LoadingProgress}" Maximum="100" Margin="0,20"/>
                <TextBlock Text="{Binding LoadingProgress, StringFormat={}{0}%}"
                           FontSize="16" Foreground="White" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
